<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Track Order - FastText Courier Service</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="navbar">
    <h1><a href="index.html">FastText</a></h1>
    <nav class="nav-links">
      <a href="index.html">Home</a>
      <a href="contact.html">Contact</a>
      <a href="track.html">Track Order</a>
    </nav>
  </header>

  <section id="tracking">
    <h2>Track Your Order</h2>
    <form onsubmit="checkOrder(event)">
      <label for="order">Enter Order Number:</label>
      <input type="text" id="order" required>
      <button type="submit">Check Status</button>
    </form>
    <p id="order-status"></p>
  </section>

  <script>
    const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vT4aAByfsAHB03gs4BThZSHL4CiAJ1lcfP6bmtgvPNAi4JUYzXDxKkdHOheKN21IJpKJtuwikkUz8Ye/pub?output=csv";

    async function fetchOrders() {
      const res = await fetch(SHEET_URL);
      const text = await res.text();
      const rows = text.split("\n").map(r => r.split(","));
      const headers = rows[11];
      const data = rows.slice(1).map(r => Object.fromEntries(r.map((val, i) => [headers[i], val])));
      return data;
    }

    async function checkOrder(event) {
      event.preventDefault();
      const input = document.getElementById("order").value.trim();
      const statusBox = document.getElementById("order-status");

      const orders = await fetchOrders();
      const order = orders.find(o => o["Order Number"] === input);

      if (order) {
        statusBox.innerHTML = `
          <strong>Order ${order["Order Number"]}</strong><br>
          Status: ${order["Status"]}<br>
        `;
      } else {
        statusBox.innerText = "âŒ Order not found. Please check your number.";
      }
    }
  </script>
</body>
</html>
